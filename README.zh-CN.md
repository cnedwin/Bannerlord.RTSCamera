# RTS Camera
(旧名：EnhancedMission, Enhanced Mission RTS Camera)

这是一个骑马与砍杀2：霸主的mod，提供了包括自由视角在内的一系列功能。

## 存档兼容性
本mod不会读写你的存档数据。安装或卸载本mod不会对你的存档造成影响。

## 功能
- 可在任何时候切换自由视角。

- 可点击的兵牌。

- 可命令你的部队攻击任意一个敌方编队。

- 通过鼠标中键点击你的部队来选择你的编队。

- 玩家角色在战场上受伤后可控制玩家的一个士兵并继续战斗和下令。

- 可观察任何一个单位并可选地控制玩家队伍中的任意一个单位。

- 可调整战斗速度，或暂停战斗。

## 如何使用

- 按`F10`可切换到自由视角，再按一次可切换回来。自由视角中玩家角色会由AI控制。

  - 按`L`并开启`默认自由视角`选项可在进入战斗时自动切换到自由视角。

- 你可以通过鼠标中键点击一个敌方编队来让你的编队**只向该敌方编队冲锋**，而非在F1 F3指令下向所有敌人冲锋。

  - 当你打开命令面板时，你选中的部队的冲锋目标会用红色轮廓高亮。

  - AI编队也可以向一个特定的敌方编队冲锋。当你打开命令面板时，你的编队中，成为敌方冲锋目标的编队会用深蓝色轮廓高亮。

  - 我没有找到限制远程武器的目标的方法，所以你在使用此功能时，记得让带有标枪的步兵停止射击。

  - 你可以按`L`然后取消`启用攻击特定编队`选项来禁用本功能。

- 可通过点击兵牌来选择部队。可以按`Alt`来显示鼠标以点击兵牌。当鼠标显示时，可拖动鼠标右键来旋转镜头。

- 可通过鼠标中键点击编队中的士兵来选择编队。选中的部队会用绿色轮廓高亮。

  - 你可以按`L`然后取消`通过点击来选择部队`选项来禁用本功能。

- 修复了游戏本体中移动指令会导致圆阵宽度变大的bug。

  - 你可以按`L`然后取消`修复圆阵`来禁用本功能。

- 玩家阵亡后后按`F`可以控制一个士兵继续战斗。在选择控制哪个士兵时，与玩家在同一编队内的士兵会优先考虑。

  - 你可以在阵亡后立即控制一个士兵以避免你的所有部队由于玩家阵亡而变为由AI指挥。按`L`然后选中`阵亡后控制队友`选项来启用这个功能。在自由视角模式中该功能总会启用，以保证顺畅的游戏体验。

- 当相机在跟随一个角色时，你可以按`F`来控制这个角色。你可以用以下方法来让相机跟随一个角色：

  - 你可以让相机跟随任意一个英雄角色，只需按`L`打开菜单，然后在`观察另一个英雄单位`下拉列表中选择一个英雄即可。

  - 你可以让相机跟随任意一个角色，只需按`;`并点击一个角色，然后按`F`即可。

  - 你可以点击鼠标左右键来改变相机跟随的角色。

- 若在战役地图中你的角色受伤了，并且你遇到了敌军，你仍然可以选择"观看这场战斗"来进入战场。这场战斗中你可能可以在自由视角中命令你的部队，但你无法直接控制一个士兵战斗。

- 暂停游戏(`[`)或调整关卡中的时间流逝速度(`'`)。

- 你可以按`L`然后点击`按键绑定`来改变本mod的快捷键。

- 你可以按`]`来开关HUD。如果你改变了该功能的快捷键，但忘了你设置的按键是什么，你总可以用`HOME`键来开启HUD。

- 配置保存。

## 如何安装
1. 移除本mod的旧版文件。到砍二游戏安装路径中的`Modules`文件夹（例如`C:\Program Files\Steam\steamapps\common\Mount & Blade II Bannerlord\Moudles\`）中移除`RTSCamera`或`EnhancedMission`文件夹。

2. 复制`RTSCamera`文件夹到砍二的`Modules`文件中。或者你可以使用Vortex来自动安装。

## 详细信息

- 在场景中时，按`L`键来打开本mod的菜单，你可以在其中访问本mod的所有选项和功能。

  - 要关闭该菜单，你可以按`esc`键，左键点击菜单外的区域，或点击右键。

- 在自由视角模式中时：

  - 用`W`, `A`, `S`, `D`, `空格`, `Z`和鼠标中键来移动相机。

  - 用`shift`来加速移动相机。

  - 移动鼠标来旋转相机。或者当命令面板打开后，右键拖动鼠标来旋转相机。

  - 选中部队后左键在地面上拖动来改变部队的位置，方向和宽度。

    - 按住`ctrl`再拖动来让选中的多个编队前后排列。

  - 按住`ctrl`再滚动鼠标中键来调整镜头移动速度。

  - 按住`ctrl`并点击鼠标中键来重设鼠标速度。

  - 按住`ctrl`然后垂直拖动鼠标中键来调整相机高度。
  
- 本mod的配置保存在文件夹`(user directory)\Documents\Mount and Blade II Bannerlord\Configs\RTSCamera\`中。

  主要配置保存在文件`RTSCameraConfig.xml`中。

  按键配置保存在文件`GameKeyConfig.xml`中。

  你可以修改配置，但如果你编辑有误或配置文件被移除，配置会被初始化为默认内容。

## 解决问题
- 若启动器无法启动：

  - 卸载所有第三方mod，然后一个个重装它们来找出哪个mod导致了启动器不能启动。

- 若提示"Unable to initialize Steam API":

  - 请先启动Steam，并确保砍二在你登录的Steam账号的库中.

- 若mod启用后游戏崩溃：

  - 若你从将本mod自低于e3.2.0的版本更新过来，请移除旧的EnhancedMission文件夹。

  - 若你能将dump文件发送给我来帮助我解决你的崩溃问题，我会十分感谢。步骤如下：

    - 游戏崩溃时在弹窗询问是否收集信息时点击`是`或`Yes`。

    - 在游戏把崩溃信息发送给TaleWorlds之前，到`C:\ProgramData\Mount and Blade II Bannerlord\crashes`中(**注意不是游戏安装路径**)根据时间找到与该崩溃相关的文件夹。

    - 将该文件夹中的`dump.dmp`文件发送给我。

- 若你忘了你设置的用哪个按键打开mod菜单：

  - 你可以移除配置文件，这样按键会恢复为默认。

## 可选文件
- ["Improved Combat AI"](https://www.nexusmods.com/mountandblade2bannerlord/mods/449/): 可调整战斗AI，可选择更真实的格挡。

- ["Cinematic Camera"](https://www.nexusmods.com/mountandblade2bannerlord/mods/1627): 调整相机参数，如移动速度，景深等等。

## 源代码

源代码应当在本mod的发布包的`source`文件夹内。或者你可以在[gitlab.com](https://gitlab.com/lzh_mb_mod/rts-camera)获取到源代码。

## 联系方式
- 邮箱：

  - lizhenhuan1019@outlook.com

  - lizhenhuan1019@qq.com
